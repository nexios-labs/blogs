---
import Layout from '@layouts/layout.astro'
import Seo from '@components/seo.astro'
import { getCollection } from 'astro:content'
import { Content as Hero } from '@assets/hero.mdx'
import SkipNavContent from '@components/a11y/skip-nav-content.astro'
import { defaultDateFormat, sortAsc } from '@utils'
import Link from '@components/link.astro'
import Prose from '@components/prose.astro'
import Spacer from '@components/spacer.astro'
import { SITE } from '@constants'

const NEXIOS_LINKS: Array<{ name: string; url: string; description: string }> = [
	{
		name: 'Documentation',
		url: 'https://nexioslabs.com',
		description: 'Complete guides and API reference',
	},
	{
		name: 'GitHub Repository',
		url: 'https://github.com/nexios-labs/nexios',
		description: 'Source code and issue tracking',
	},
	{
		name: 'Community',
		url: 'https://nexioslabs.com/community/',
		description: 'Join the Nexios community',
	},
]

const POSTS_TO_SHOW = 3

const posts = sortAsc(await getCollection('blog')).slice(0, POSTS_TO_SHOW)
---

<Layout>
	<Seo slot="seo" title="Home" description="The official blog for Nexios - a modern, async-first Python web framework designed for high-performance applications." />
	<SkipNavContent>
		<h1 class="sr-only">{SITE.title}</h1>
		<Prose>
			<Hero />
		</Prose>
		<Spacer axis="vertical" size={32} />
		<section>
			<div class="relative overflow-hidden">
				<div class="absolute inset-0 bg-gradient-to-r from-primary/20 to-accent/20"></div>
				<div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32 text-center">
					<h1 class="text-4xl md:text-6xl lg:text-8xl font-bold text-nexios-gradient mb-8">
						{SITE.title}
					</h1>
					<p class="text-xl md:text-2xl text-text/80 mb-12 max-w-4xl mx-auto leading-tight">
						Build high-performance async APIs with clean architecture, zero boilerplate, and excellent developer experience
					</p>
					<div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
						<a href="/blog/" class="btn-primary px-8 py-4">
							Read Latest Posts
						</a>
						<a href="https://nexioslabs.com" target="_blank" class="btn-accent px-8 py-4">
							Get Started
						</a>
					</div>
				</div>
			</div>
		</section>
		<Spacer axis="vertical" size={32} />
		<section>
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
				<div class="text-center mb-16">
					<h2 class="text-4xl md:text-5xl font-bold text-highlight mb-4">
						Why Developers Love Nexios
					</h2>
					<p class="text-xl text-subtle max-w-2xl mx-auto">
						Powerful features that make async Python development intuitive and enjoyable
					</p>
				</div>
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
					{
						NEXIOS_LINKS.map((link, index) => (
							<div class={`${index === 0 ? 'lg:col-span-2 nexios-card' : index === 1 ? 'nexios-card-accent' : 'nexios-card'}`}>
								<div class="flex items-center mb-4">
									<div class={`w-12 h-12 ${index === 1 ? 'bg-white/90' : 'bg-primary'} rounded-xl flex items-center justify-center mr-4`}>
										<span class="text-2xl">{index === 0 ? '‚ö°' : index === 1 ? 'üéØ' : 'üèóÔ∏è'}</span>
									</div>
									<h3 class={`text-2xl font-bold ${index === 1 ? 'text-highlight' : 'text-highlight'}`}>{link.name}</h3>
								</div>
								<p class="text-subtle text-lg leading-relaxed">{link.description}</p>
								<div class="mt-6">
									<Link href={link.url} class="text-primary hover:text-primary-dark font-medium">
										Learn more ‚Üí
									</Link>
								</div>
							</div>
						))
					}
				</div>
			</div>
		</section>
		<Spacer axis="vertical" size={32} />
		<section>
			<div class="border-b border-border pb-4 flex justify-between items-center">
				<h2 class="font-medium text-xl md:text-2xl lg:text-3xl text-highlight">Latest Posts</h2>
				<div><Link href="/blog/">Read all posts</Link></div>
			</div>
			<Spacer axis="vertical" size={8} />
			<div class="flex gap-10 flex-col">
				{
					posts.map(({ data: post }) => (
						<div>
							<Link variant="highlight" href={`/${post.slug}/`}>
								{post.title}
							</Link>
							<Spacer axis="vertical" size={2} />
							<div class="text-faded">{defaultDateFormat(post.date)}</div>
						</div>
					))
				}
			</div>
		</section>
		<Spacer axis="vertical" size={32} />
		<section>
			<div class="border-b border-border pb-4">
				<h2 class="font-medium text-xl md:text-2xl lg:text-3xl text-highlight">Explore Nexios</h2>
			</div>
			<Spacer axis="vertical" size={8} />
			<div class="grid gap-6 md:grid-cols-3">
				{
					NEXIOS_LINKS.map((link) => (
						<div class="border border-border rounded-lg p-6 hover:border-primary transition-colors">
							<Link variant="highlight" href={link.url} class="font-medium text-lg">
								{link.name}
							</Link>
							<Spacer axis="vertical" size={2} />
							<p class="text-subtle">{link.description}</p>
						</div>
					))
				}
			</div>
		</section>
	</SkipNavContent>
</Layout>
